"DOTAAbilities"
{
    // Necropolis -> Halls of the Dead
    "undead_train_halls_of_the_dead"
    {
        "BaseClass"             		"ability_lua"
        "ScriptFile"                    "abilities/undead/undead_upgrade/undead_train_halls_of_the_dead.lua"
        "AbilityTextureName"			"undead_train_halls_of_the_dead"
        "MaxLevel" 						"1"

        "AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_IGNORE_PSEUDO_QUEUE"

        // "AbilityGoldCost"				"320"
        "AbilityChannelTime"			"%build_time"

        "AbilityMultiOrder"				"1"

        "AbilitySpecial"
        {
            "01"
            {
                "var_type"				"FIELD_FLOAT"
                "build_time"			"120.0" 
            }
            "02"
            {
                "var_type"				"FIELD_INTEGER"
                "gold_cost"				"320"
            }
            "03"
            {
                "var_type"				"FIELD_INTEGER"
                "lumber_cost"			"210"
            }
        }
    }

    // Requires Altar
    "undead_train_black_citadel_disabled"
    {
        "BaseClass"             		"ability_datadriven"
        "AbilityTextureName"			"undead_train_black_citadel"
        "MaxLevel" 						"0"

        "OnUpgrade"
        {
            "RunScript"
            {
                "ScriptFile"	"buildings/upgrades.lua"
                "Function"		"SetLevel0"
            }
        }
    }

    // Halls of the Dead -> Black Citadel
    "undead_train_black_citadel"
    {
        "BaseClass"             		"ability_datadriven"
        "AbilityTextureName"			"undead_train_black_citadel"
        "MaxLevel" 						"1"

        "AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_IGNORE_PSEUDO_QUEUE"

        "AbilityGoldCost"				"325"
        "AbilityChannelTime"			"%build_time"

        "AbilityMultiOrder"				"1"

        "AbilitySpecial"
        {
            "01"
            {
                "var_type"				"FIELD_FLOAT"
                "build_time"			"120.0" 
            }
            "02"
            {
                "var_type"				"FIELD_INTEGER"
                "gold_cost"				"325"
            }
            "03"
            {
                "var_type"				"FIELD_INTEGER"
                "lumber_cost"			"230"
            }
        }

        "OnSpellStart"
        {
            "RunScript"
            {
                "ScriptFile"	"buildings/queue.lua"
                "Function"		"EnqueueUnit"
                "Action"		"StartUpgrade"
            }
        }

        "OnChannelSucceeded"
        {
            // Consume the first item in the queue
            "RunScript"
            {
                "ScriptFile"   	"buildings/queue.lua"
                "Function"      "NextQueue"
            }

            "RunScript"
            {
                "ScriptFile"	"buildings/upgrades.lua"
                "Function"		"UpgradeBuilding"
                "UnitName"		"undead_black_citadel"
            }		
        }
    }

    // Ziggurat -> Nerubian Tower
    "undead_train_nerubian_tower"
    {
        "BaseClass"             		"ability_datadriven"
        "AbilityTextureName"			"undead_train_nerubian_tower"
        "MaxLevel" 						"1"

        "AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_IGNORE_PSEUDO_QUEUE"

        "AbilityGoldCost"				"100"
        "AbilityChannelTime"			"%build_time"

        "AbilityMultiOrder"				"1"

        "AbilitySpecial"
        {
            "01"
            {
                "var_type"				"FIELD_FLOAT"
                "build_time"			"35.0" 
            }
            "02"
            {
                "var_type"				"FIELD_INTEGER"
                "gold_cost"				"100"
            }
            "03"
            {
                "var_type"				"FIELD_INTEGER"
                "lumber_cost"			"20"
            }
        }
        
        "OnSpellStart"
        {
            "RunScript"
            {
                "ScriptFile"	"buildings/queue.lua"
                "Function"		"EnqueueUnit"
                "Action"		"StartUpgrade"
            }
        }

        "OnChannelSucceeded"
        {
            // Consume the first item in the queue
            "RunScript"
            {
                "ScriptFile"   	"buildings/queue.lua"
                "Function"      "NextQueue"
            }

            "RunScript"
            {
                "ScriptFile"	"buildings/upgrades.lua"
                "Function"		"UpgradeBuilding"
                "UnitName"		"undead_nerubian_tower"
            }		
        }
    }

    // Ziggurat -> Spirit Tower
    // Requires graveyard
    "undead_train_spirit_tower_disabled"
    {
        "BaseClass"             		"ability_datadriven"
        "AbilityTextureName"			"undead_train_spirit_tower"
        "MaxLevel" 						"0"

        "OnUpgrade"
        {
            "RunScript"
            {
                "ScriptFile"	"buildings/upgrades.lua"
                "Function"		"SetLevel0"
            }
        }
    }

    "undead_train_spirit_tower"
    {
        "BaseClass"             		"ability_datadriven"
        "AbilityTextureName"			"undead_train_spirit_tower"
        "MaxLevel" 						"1"

        "AbilityBehavior"				"DOTA_ABILITY_BEHAVIOR_NO_TARGET | DOTA_ABILITY_BEHAVIOR_IMMEDIATE | DOTA_ABILITY_BEHAVIOR_IGNORE_CHANNEL | DOTA_ABILITY_BEHAVIOR_IGNORE_PSEUDO_QUEUE"

        "AbilityGoldCost"				"145"
        "AbilityChannelTime"			"%build_time"

        "AbilityMultiOrder"				"1"

        "AbilitySpecial"
        {
            "01"
            {
                "var_type"				"FIELD_FLOAT"
                "build_time"			"35.0" 
            }
            "02"
            {
                "var_type"				"FIELD_INTEGER"
                "gold_cost"				"145"
            }
            "03"
            {
                "var_type"				"FIELD_INTEGER"
                "lumber_cost"			"40"
            }
        }
        
        "OnSpellStart"
        {
            "RunScript"
            {
                "ScriptFile"	"buildings/queue.lua"
                "Function"		"EnqueueUnit"
                "Action"		"StartUpgrade"
            }
        }

        "OnChannelSucceeded"
        {
            // Consume the first item in the queue
            "RunScript"
            {
                "ScriptFile"   	"buildings/queue.lua"
                "Function"      "NextQueue"
            }

            "RunScript"
            {
                "ScriptFile"	"buildings/upgrades.lua"
                "Function"		"UpgradeBuilding"
                "UnitName"		"undead_spirit_tower"
            }		
        }
    }
}